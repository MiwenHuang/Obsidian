### 说一下完整的HTTP请求过程包括哪些内容？
首先域名解析，然后发起TCP三次握手，建立TCP链接后发起HTTP请求，服务器响应HTTP请求，浏览器得到HTML代码，浏览器解析HTML代码，并请求HTML代码的资源，最后浏览器对页面进行渲染呈现给用户

### 你知道DNS是什么
DNS是一个域名和IP地址互相映射的一个分布式数据库。

### DNS的工作原理
![[Pasted image 20240330172310.png]]

- 请求一旦发起，若是chrome浏览器，先在浏览器找之前**有没有缓存过的域名所对应的ip地址**，有的话，直接跳过dns解析了，若是没有，就会**找硬盘的hosts文件**，看看有没有，有的话，直接找到hosts文件里面的ip
- 如果本地的hosts文件没有能得到对应的ip地址，浏览器会发出一个**dns请求到本地dns服务器**，**本地dns服务器一般都是你的网络接入服务器商提供**，比如中国电信，中国移动等。
- 查询你输入的网址的DNS请求到达本地DNS服务器之后，**本地DNS服务器会首先查询它的缓存记录**，如果缓存中有此条记录，就可以直接返回结果，此过程是**递归的方式进行查询**。如果没有，本地DNS服务器还要向**DNS根服务器**进行查询。
- 本地DNS服务器继续向域服务器发出请求，在这个例子中，请求的对象是.com域服务器。.com域服务器收到请求之后，也不会直接返回域名和IP地址的对应关系，而是告诉本地DNS服务器，你的域名的解析服务器的地址。
- 最后，本地DNS服务器向**域名的解析服务器**发出请求，这时就能收到一个域名和IP地址对应关系，本地DNS服务器不仅要把IP地址返回给用户电脑，还要把这个对应关系保存在缓存中，以备下次别的用户查询时，可以直接返回结果，加快网络访问。

### HTTP的长连接和短连接的区别
在HTTP/1.0中默认使用短连接。也就是说，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。

而从HTTP/1.1起，默认使用长连接，用以保持连接特性。

### 为什么服务器会缓存这一项功能？如何实现的？
#### 原因：
- 缓解服务器的压力
- 降低客户端获取资源的延迟

#### 实现方法
- 让代理服务器进行缓存
- 让客户端浏览器进行缓存


### HTTP请求方法你知道多少？
客户端发送的请求报文第一行为请求行，包含了方法字段
根据HTTP标准，HTTP请求可以使用很多请求方法

HTTP1.0定义了三种请求方法：GET、POST和HEAD方法
HTTP1.1新增了六种请求：OPTIONS、PUT、PATCH、DELETE、TRACE和CONNECT方法。

| 序号 | 方法     | 描述                                                                                                 |
|------|----------|------------------------------------------------------------------------------------------------------|
| 1    | GET      | 请求指定的页面信息，并返回实体主体。                                                                |
| 2    | HEAD     | 类似于 GET 请求，只不过返回的响应中没有具体的内容，用于获取报头。                                   |
| 3    | POST     | 向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST 请求可能会导致新的资源的建立和/或已有资源的修改。 |
| 4    | PUT      | 从客户端向服务器传送的数据取代指定的文档的内容。                                                    |
| 5    | DELETE   | 请求服务器删除指定的页面。                                                                         |
| 6    | CONNECT  | HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。                                           |
| 7    | OPTIONS  | 允许客户端查看服务器的性能。                                                                      |
| 8    | TRACE    | 回显服务器收到的请求，主要用于测试或诊断。                                                         |
| 9    | PATCH    | 是对 PUT 方法的补充，用来对已知资源进行局部更新。                                                  |

### GET和POST的区别
1. get是获取数据、post是修改数据
2. get是把请求的数据放在url上，所以get不安全。而post把数据放在HTTP包体内
3. GET产生一个TCP数据包，浏览器会把http header和data一并发送出去，服务器响应200；TCP产生两个TCP数据包，浏览器先发送header，服务器响应100，浏览器再发送data，服务器响应200
4. GET请求会被浏览器主动缓存，而POST不会，除非手动设置

### 浏览器中输入url地址后，现实主页的过程
#### 简单回答
- 根据域名，进行dns分析；
- 拿到解析的地址，建立TCP连接；
- 向IP地址，发送HTTP请求；
- 服务器请求处理
- 返回响应结果
- 关闭TCP连接
- 浏览器解析HTML
- 浏览器布局渲染

#### 详细回答
首先查找浏览器缓存，如果没有就查找本机缓存，如果没有就调用系统API，Linux下socket函数 gethostbyname，向DNS服务器发送DNS请求，查询本地DNS服务器，如果在一个子网内采用ARP地址解析协议进行ARP查询如果不在一个子网那就需要对默认网关进行DNS查询，如果还找不到会一直向上找根DNS服务器，直到最终拿到IP地址

这时候我们就有服务器的IP地址和默认的端口号，尝试http然后调用socket创建TCP连接，经过三次握手成功后，开始传送数据，数据传死那个完毕后，四次挥手断开连接

### HTTP和HTTPS的区别
1. HTTP协议传输的数据是未加密的饿，也就是明文的，因此使用HTTP协议传输隐私信息非常不安全，HTTPS协议是由SSL+HTTP协议构建的可以进行加密传输、身份认证的网络协议，比HTTP安全
2. HTTPS协议需要到ca申请证书，一般免费证书少因此需要一定费用
3. HTTP和HTTPS使用时完全不用的连接方式，用的端口也不一样，前者是80，后者是443

### 什么是SSL/TLS
SSL代表安全套接字层。它是一种用于加密和验证应用程序（如浏览器）和Web服务器之间发送的数据的协议。 身份验证 ， 加密Https的加密机制是一种共享密钥加密和公开密钥加密并用的混合加密机制。

SSL/TLS协议作用：认证用户和服务，加密数据，维护数据的完整性的应用层协议加密和解密需要两个不同的密钥，故被称为非对称加密；加密和解密都使用同一个密钥的

对称加密：优点在于加密、解密效率通常比较高 ，HTTPS 是基于非对称加密的， 公钥是公开的，

### HTTP请求和响应报文段主要有哪些字段
#### 请求报文
- 请求行
- 请求头
- 请求体

#### 响应豹纹
- 状态行
- 响应头
- 响应体

### Cookie和Session
#### Cookie是什么
Cookie 是**服务器发送到用户浏览器并保存在本地的一小块数据**，它会在浏览器之后向同一服务器再次发起请求时被携带上，用于告知服务端两个请求是否来自同一浏览器。由于之后每次请求都会需要携带 Cookie 数据，因此会带来额外的性能开销
Cookie 曾一度用于客户端数据的存储，因为当时并没有其它合适的存储办法而作为唯一的存储手段，但现在随着现代浏览器开始支持各种各样的存储方式，Cookie 渐渐被淘汰。
#### Cookie有什么用途？
- 会话状态管理
- 个性化设置
- 浏览器行为跟踪

#### Session
除了可以将用户信息通过 Cookie 存储在用户浏览器中，也可以利用 Session 存储在服务器端，存储在服务器端的信息更加安全。

Session 可以存储在服务器上的文件、数据库或者内存中。也可以将 Session 存储在 Redis 这种内存型数据库中，效率会更高。

使用Session维护用户登录状态：
- 用户进行登录时，用户提交包含用户名和密码的表单，放入HTTP请求报文中
- 服务器验证用户名和密码，如果正确则把用户信息存储到Redis中，他在Redis中的Key称为SessionID
- 服务器返回的响应报文的set-cookie首部字段包含了这个SessionID，客户端收到响应报文之后将该Cookie存入浏览器中；
- 客户端之后对同一个服务器进行请求时会包含该Cookie值，服务器收到之后提取出SessionID，从Redis中取出用户信息，继续之前的业务操作

### 端口的有效范围是多少到多少
0-1023是知名端口号，UDP和TCP报头使用两个字节存放端口号，所以端口号的有效范围是从0到65535。动态端口的范围是从1024到65535

| 协议         | 默认端口号 |
| ---------- | ----- |
| HTTP       | 80    |
| HTTPS      | 443   |
| FTP        | 21    |
| FTPS       | 990   |
| SSH        | 22    |
| Telnet     | 23    |
| SMTP       | 25    |
| POP3       | 110   |
| IMAP       | 143   |
| DNS        | 53    |
| DHCP       | 67/68 |
| MySQL      | 3306  |
| PostgreSQL | 5432  |
| Redis      | 6379  |
| MongoDB    | 27017 |
### 应用层常见协议

| 协议   | 名称                   | 默认端口 | 底层协议 |
|--------|------------------------|----------|----------|
| HTTP   | 超文本传输协议         | 80       | TCP      |
| HTTPS  | 超文本传输安全协议     | 443      | TCP      |
| Telnet | 远程登录服务的标准协议 | 23       | TCP      |
| FTP    | 文件传输协议           | 20传输和21连接 | TCP  |
| TFTP   | 简单文件传输协议       | 69       | UDP      |
| SMTP   | 简单邮件传输协议（发送用） | 25   | TCP      |
| POP    | 邮局协议（接收用）     | 110      | TCP      |
| DNS    | 域名解析服务           | 53       | 服务器间进行域传输的时候用TCP<br>客户端查询DNS服务器时用UDP |
### HTTPS是什么？
HTTPS并不是什么新协议，而是让HTTP先和SSL通信，再由SSL和TCP通信，也就是说HTTPS使用了隧道进行通信。通过使用SSL，HTTPS具有加密、认证和完整性保护

### HTTP的缺点有哪些
- 使用明文进行通信，内容可能会被窃听
- 不验证通信方的身份，通信方的身份有可能遭遇伪装
- 无法证明报文的完整性，报文可能遭篡改

### SSL中的认证中的证书是什么？了解过吗？
通过使用 **证书** 来对通信方进行认证。
数字证书认证机构（CA，Certificate Authority）是客户端与服务器双方都可信赖的第三方机构。
服务器的运营人员向 CA 提出公开密钥的申请，CA 在判明提出申请者的身份之后，会对已申请的公开密钥做数字签名，然后分配这个已签名的公开密钥，并将该公开密钥放入公开密钥证书后绑定在一起。
进行 HTTPS 通信时，服务器会把证书发送给客户端。客户端取得其中的公开密钥之后，先使用数字签名进行验证，如果验证通过，就可以开始通信了。

### 常见的HTTP状态码有哪些
|状态码|类别|含义|
|---|---|---|
|1XX|Informational（信息性状态码）|接收的请求正在处理|
|2XX|Success（成功状态码）|请求正常处理完毕|
|3XX|Redirection（重定向状态码）|需要进行附加操作以完成请求|
|4XX|Client Error（客户端错误状态码）|服务器无法处理请求|
|5XX|Server Error（服务器错误状态码）|服务器处理请求出|
**100 Continue** ：表明到目前为止都很正常，客户端可以继续发送请求或者忽略这个响应。

- **200 OK**
- **204 No Content** ：请求已经成功处理，但是返回的响应报文不包含实体的主体部分。一般在只需要从客户端往服务器发送信息，而不需要返回数据时使用。
- **206 Partial Content** ：表示客户端进行了范围请求，响应报文包含由 Content-Range 指定范围的实体内容。

- **301 Moved Permanently** ：永久性重定向
- **302 Found** ：临时性重定向
- **303 See Other** ：和 302 有着相同的功能，但是 303 明确要求客户端应该采用 GET 方法获取资源。
- **304 Not Modified** ：如果请求报文首部包含一些条件，例如：If-Match，If-Modified-Since，If-None-Match，If-Range，If-Unmodified-Since，如果不满足条件，则服务器会返回 304 状态码。
- **307 Temporary Redirect** ：临时重定向，与 302 的含义类似，但是 307 要求浏览器不会把重定向请求的 POST 方法改成 GET 方法。

- **400 Bad Request** ：请求报文中存在语法错误。
- **401 Unauthorized** ：该状态码表示发送的请求需要有认证信息（BASIC 认证、DIGEST 认证）。如果之前已进行过一次请求，则表示用户认证失败。
- **403 Forbidden** ：请求被拒绝。
- **404 Not Found**

- **500 Internal Server Error** ：服务器正在执行请求时发生错误。
- **503 Service Unavailable** ：服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。



